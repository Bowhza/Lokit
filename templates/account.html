{% extends "base.html" %}

{% block body %}

<main>
    <h1 id="accounts-title">Account</h1>
    {% if session["name"]%}
    <nav id="accounts-nav">
        <div id="logged-in-as">
            <p>You are logged in as <b>{{session["name"]}}</b>.</p>
            <a href="/logout">Logout</a>
        </div>
        <div>
            {% for button in nav_btns %}
                <button name="action" value="{{button}}">{{nav_btns[button]}}</button>
            {% endfor %}
        </div>
    </nav>
    {% endif %}

    <div id="newpass-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>Enter the following Information:</h2>
            {% include 'forms.html' %}
            {% block newaccform %}{% endblock %}
        </div>
    </div>

    <h2 id="grid-title">Here are your stored passwords:</h2>
    <section id="accounts-grid">
        {% for username, password, app, web, rowid in data %}
        <div class="account-block">
            <p>Username: {{username[0]}}</p>
            <p>Password: {{password.decode()}}</p>
            <p>App/Website: <a target="_blank" href="https://{{web[0]}}">{{app[0]}}</a></p>
            <form action="/removepass" method="post">
                <input hidden type="text" name="id" value="{{rowid[0]}}">
                <button type="submit">Delete Entry</button>
            </form>
        </div>
        {% endfor %}
    </section>
</main>
    
{% endblock %}